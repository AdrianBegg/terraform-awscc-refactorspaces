# Example : Deploying and configuring AWS Migration Hub Refactor Spaces in a multi-account

The following example deploys AWS Migration Hub Refactor Spaces components in a multi-account setup. In this example the components are deployed according to separation of concerns. In the example the CI/CD pipeline deploying the components would be executing in a single pipeline account however this could be decomposed with the pipeline for each application deploying the application and associated services/routes.

This approach simplifies implementation of least-privilege access models for a single application scope, simplify internal resource tracking and charge-back and service limits and quotas.

This example would deploy the following:
* An Amazon VPC "vpc-application-example-proxy" with IPv4 CIDR 192.168.10.0/24 and two 27-bit private subnets
* A AWS Migration Hub Refactor Spaces environment named "unicorn-dev" (in the `central-mgmt` account)
* A AWS Migration Hub Refactor Spaces application named "Unistore" (in the `unistore-frontend` account)
* An AWS Transit Gateway is provisioned and managed by AWS Refactor Spaces for managing cross-account network connectivity
* A AWS Migration Hub Refactor Spaces service "Unistore-legacy" pointing to a monolithic application deployed on Amazon EC2/ECS/EKS or similar services running in a VPC with a DNS name `http://legacy-unicorns.example.com/` acting as the default route (in the `unistore-frontend` account)
* A AWS Migration Hub Refactor Spaces service "Unistore-AddToCartService" pointing at a microservice deployed as AWS Lambda Function with the ARN `arn:aws:lambda:us-east-1:999999999999:function:AddToCart`. (in the `unistore-userservice` account)
* A route that sends `POST` and `GET` requests to `/unicorns/basket` to the AWS Lambda function (in the `unistore-userservice` account)